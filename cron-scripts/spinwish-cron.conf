# SpinWish Server Cron Configuration
# This file contains configuration settings for the automated server management

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================

# Server port (default: 8080)
SERVER_PORT=8080

# Spring profile to use (auto, prod, local, dev)
# auto: Uses smart_start.sh for automatic database detection
# prod: Uses production profile with remote PostgreSQL
# local: Uses local PostgreSQL
# dev: Uses H2 in-memory database
PROFILE=auto

# Java options for the server
JAVA_OPTS="-Xmx1g -Xms512m -XX:+UseG1GC -XX:MaxGCPauseMillis=200"

# =============================================================================
# HEALTH CHECK CONFIGURATION
# =============================================================================

# Number of health check retries before considering server unhealthy
HEALTH_CHECK_RETRIES=5

# Interval between health check retries (seconds)
HEALTH_CHECK_INTERVAL=10

# Health check timeout for each attempt (seconds)
HEALTH_CHECK_TIMEOUT=30

# =============================================================================
# CRON SCHEDULE CONFIGURATION
# =============================================================================

# Enable/disable different cron schedules
ENABLE_3MIN_CRON=true
ENABLE_5MIN_CRON=false
ENABLE_10MIN_CRON=false
ENABLE_15MIN_CRON=false
ENABLE_30MIN_CRON=false

# Custom cron expressions (if you want to override defaults)
# Format: minute hour day month weekday
# Examples:
# CUSTOM_CRON_1="*/3 * * * *"    # Every 3 minutes
# CUSTOM_CRON_2="0 */2 * * *"    # Every 2 hours
# CUSTOM_CRON_3="0 9,17 * * 1-5" # 9 AM and 5 PM on weekdays

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# Log level (DEBUG, INFO, WARN, ERROR)
LOG_LEVEL=INFO

# Maximum log file size before rotation (in MB)
MAX_LOG_SIZE=50

# Number of log files to keep
LOG_RETENTION_COUNT=10

# Log directory (relative to project root)
LOG_DIR=logs/cron

# =============================================================================
# STARTUP CONFIGURATION
# =============================================================================

# Maximum attempts to start the server
MAX_START_ATTEMPTS=3

# Timeout for server startup (seconds)
START_TIMEOUT=120

# Delay between restart attempts (seconds)
RESTART_DELAY=30

# =============================================================================
# MONITORING CONFIGURATION
# =============================================================================

# Enable email notifications for failures
ENABLE_EMAIL_NOTIFICATIONS=false

# Email address for notifications
NOTIFICATION_EMAIL=""

# Enable Slack notifications
ENABLE_SLACK_NOTIFICATIONS=false

# Slack webhook URL
SLACK_WEBHOOK_URL=""

# =============================================================================
# MAINTENANCE CONFIGURATION
# =============================================================================

# Enable automatic log cleanup
ENABLE_LOG_CLEANUP=true

# Days to keep logs
LOG_CLEANUP_DAYS=7

# Enable automatic restart during maintenance windows
ENABLE_MAINTENANCE_RESTART=false

# Maintenance window (24-hour format, e.g., "02:00-04:00")
MAINTENANCE_WINDOW="02:00-04:00"

# Days of week for maintenance (0=Sunday, 1=Monday, etc.)
MAINTENANCE_DAYS="0,6"  # Weekend only

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# User to run the server as (leave empty for current user)
RUN_AS_USER=""

# Umask for created files
UMASK=022

# =============================================================================
# ADVANCED CONFIGURATION
# =============================================================================

# Custom environment variables for the server
# Format: VAR_NAME=value (one per line)
# Example:
# SPRING_PROFILES_ACTIVE=prod
# DATABASE_URL=jdbc:postgresql://localhost:5432/spinwish

# Custom JVM arguments
CUSTOM_JVM_ARGS=""

# Pre-start commands (executed before starting server)
PRE_START_COMMANDS=""

# Post-start commands (executed after successful start)
POST_START_COMMANDS=""

# =============================================================================
# FAILOVER CONFIGURATION
# =============================================================================

# Enable automatic failover to different profiles
ENABLE_PROFILE_FAILOVER=true

# Failover sequence (comma-separated profiles to try in order)
FAILOVER_PROFILES="auto,local,dev"

# Maximum failover attempts
MAX_FAILOVER_ATTEMPTS=3
